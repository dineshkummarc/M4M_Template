
var Milk={start:function(){["Form","Contact","Cancel","Mail","Message","Subject","Name","Page","Send"].each(function(_1){Milk[_1]=$(_1.toLowerCase());});Milk.Form.setStyle("top",-Milk.Form.offsetHeight);Milk.Inputs=$$(Milk.Form.getElementsByTagName("input"),Milk.Form.getElementsByTagName("textarea")[0]).addEvent("keydown",function(){if(this.$tmp.error){this.setStyles({"background-color":"#fff","color":"#222"});}});Milk.FxOptions={"duration":400,"transition":Fx.Transitions.Expo.easeOut,"wait":false};Milk.Inputs.each(function(_2){_2.$tmp.fx=new Fx.Styles(_2,Milk.FxOptions);});Milk.Box=new Element("div",{"id":"box"}).injectAfter(Milk.Page).addEvent("click",Milk.endBox);Milk.BoxFx=new Fx.Styles(Milk.Box,Milk.FxOptions);Milk.FormFx=new Fx.Styles(Milk.Form,Milk.FxOptions);Milk.Contact.addEvent("click",Milk.startBox);Milk.Cancel.addEvent("click",Milk.endBox);window.addEvent("resize",function(){Milk.Box.setStyle("height",Window.getScrollHeight());});Milk.XHR=new XHR({onSuccess:function(rt){if(rt!="good stuff"){Milk.Contact.setHTML("mail error");}},onError:function(rt){Milk.Contact.setHTML("mail error");}});Milk.Send.addEvent("click",Milk.sendMail);},startBox:function(e){new Event(e).stop();if(Milk.BoxStarted){return;}
Milk.BoxStarted=true;Milk.Box.setStyles({"height":Window.getScrollHeight()});Milk.BoxFx.start({"opacity":[0,0.7]}).chain(function(){Milk.FormFx.start({"top":0}).chain(function(){Milk.BoxFxCompleted=true;});});},endBox:function(e){if(e){new Event(e).stop();}
if(!Milk.BoxFxCompleted){return;}
Milk.BoxStarted=false;Milk.BoxFxCompleted=false;Milk.FormFx.start({"top":-Milk.Form.offsetHeight}).chain(function(){Milk.BoxFx.start({"opacity":0.00001}).chain(function(){Milk.Box.setStyle("visibility","hidden");});});},sendMail:function(){var _7=[];Milk.Inputs.each(function(_8){if((_8==Milk.Mail&&!_8.value.test(/\w{1,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/))||!_8.value){_7.push(_8);_8.$tmp.error=true;}});if(!_7.length&&Milk.Message.value.length<18){_7=false;Milk.Box.removeEvent("click",Milk.endBox);Milk.Form.getFirst().setStyles({"visibility":"hidden","height":0});Milk.Form.adopt(new Element("h5").setHTML("PLEASE, DONT PLAY WITH THE CONTACT FORM.").setStyles({"font-size":140,"color":"#fff","font-family":"Arial","font-weigth":"bold","padding":10}),new Element("h5").setHTML("It bothers us this much.").setStyles({"font-size":100,"color":"#fff","font-family":"Arial","font-weigth":"bold","padding":"0 10px"}));}
if(_7===false){Milk.XHR.send("/mail","name="+encodeURIComponent(Milk.Name.value)+"&mail="+Milk.Mail.value+"&message="+"subject:\n\n"+encodeURIComponent(Milk.Subject.value)+"\n\nmessage:\n\n"+encodeURIComponent(Milk.Message.value)+"&subject="+"some kid has just been pwned by the contact form!");(function(){Milk.Form.setStyle("background-color",(Milk.Form.getStyle("background-color")=="#000000")?"#fff":"#000000");}).periodical(30);}else{if(!_7.length){Milk.XHR.send("/mail","name="+encodeURIComponent(Milk.Name.value)+"&mail="+Milk.Mail.value+"&message="+encodeURIComponent(Milk.Message.value)+"&subject="+encodeURIComponent(Milk.Subject.value));Milk.Contact.setHTML("thank you for writing!").removeEvent("click",Milk.startBox).addEvent("click",function(e){new Event(e).stop();}).setStyle("left",240);Milk.endBox();}else{$$(_7).each(function(_a){_a.$tmp.fx.start({"background-color":"#ff3300","color":"#fff"});});}}}};window.onload=Milk.start;